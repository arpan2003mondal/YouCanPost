<%- include('./partials/header') %>
<div class="w-full min-h-screen bg-zinc-900 text-white p-10 flex flex-col">

    <div class="nav mb-2 flex justify-between" >
       
        <div class="flex gap-8">
            <a class="text-blue-500 " href="/">Go To Home</a>
            <a class="text-orange-500 " href="/allposts">See all posts</a>    
        </div>

        <div class="flex gap-5">
            <a class="text-violet-500 " href="/password">Change Password</a>
            <a class="text-green-500 " href="/profile/update">Update Profile</a>
            <a class="text-red-500 " href="/users/logout">Logout</a>
        </div>
    </div>

    <div class="flex item-start gap-3">
        <div class="w-10 h-10  overflow-hidden">
           
        </div>
        <h2 class="text-3xl font-light">Hello <%=user.name %></h2>
    </div>

    <h5 class="mt-2 mb-2">You can create a new post.</h5>
    

    <form autocomplete="off" action="/posts/create" method="post">
        <textarea placeholder="What's on your mind?" class="block outline-none bg-transparent border-2 border-zinc-800 resize-none rounded-md p-2 w-1/2" name="content" ></textarea>
        <input class="w-40 px-3 py-2 bg-blue-500 text-sm rounded-md m-2 block" type="submit" value="Create new post">
    </form>

    <div class="posts mt-5 flex-1 overflow-hidden">
        <h2 class="text-green-400 text-2xl" >Your Posts</h2>

        <% if(user.posts.length === 0){ %>
            <h3 class="text-zinc-400 mt-2" >No Posts yet</h3>
        <%  } %>

        <div class="postcontainer mt-5 w-1/2">
          <% user.posts.reverse().forEach(function(post){ %>
           
            <div class="post  m-2 bg-zinc-700  rounded-md  border-zinc-800 p-4 border-b border-gray-300">    
                <h4 class="text-blue-500">@<%=user.username%></h4>
                <p class="text-sm tracking-tight"><%= post.content %></p>
                <div class=" flex gap-5 mt-2">
                    <small class="inline-block"><%= post.likes.length %> likes</small>
                    <small class="inline-block"><%= post.unlikes.length %> unlikes</small>
                </div>
                <div class="btns flex gap-5 mt-2">

                    <a class="text-yellow-500" href="/posts/edit/<%= post._id %>">Edit</a>
                    <a class="text-red-600" href="/posts/delete/<%= post._id %>">Delete</a>

                </div>
            </div>

            <%  }) %>               
         </div>


    </div>
  

</div>
<%- include('./partials/footer') %>